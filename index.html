<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeSphere - Real Online Compiler with Piston API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .logo-icon {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transform: rotate(5deg);
            transition: transform 0.3s;
        }

        .logo-icon:hover {
            transform: rotate(0deg) scale(1.1);
        }

        .logo-text h1 {
            font-size: 1.8rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .logo-text p {
            font-size: 0.8rem;
            color: #666;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 4rem 2rem;
            color: white;
            background: rgba(0, 0, 0, 0.1);
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease;
        }

        .hero p {
            font-size: 1.3rem;
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto 2rem;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .hero-badges {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease 0.4s both;
        }

        .badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 0.8rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        /* Feature Cards */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            animation: fadeInUp 1s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .feature-card p {
            color: #666;
            font-size: 0.95rem;
        }

        /* Compiler Section */
        .compiler-section {
            background: white;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
            margin-bottom: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .compiler-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1.5rem 2rem;
            color: white;
        }

        .compiler-header h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .compiler-header p {
            opacity: 0.95;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            padding: 1.5rem 2rem;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .tab-btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            color: #64748b;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        /* Language Info */
        .language-info {
            padding: 1.5rem 2rem;
            background: #f1f5f9;
        }

        .info-box {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .info-box p {
            color: #475569;
            font-size: 0.95rem;
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            gap: 0.8rem;
            padding: 1.5rem 2rem;
            flex-wrap: wrap;
            background: white;
        }

        .lang-btn {
            padding: 0.7rem 1.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 30px;
            background: white;
            color: #475569;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .lang-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
            color: white;
        }

        /* Editor */
        .editor-wrapper {
            padding: 0 2rem 2rem;
        }

        .editor-container {
            background: #1e1e1e;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid #333;
        }

        .editor-header {
            background: #2d2d2d;
            color: white;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #404040;
        }

        .editor-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .editor-title h3 {
            font-size: 1rem;
            font-weight: 500;
        }

        .version-badge {
            background: #667eea;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        #code-editor {
            width: 100%;
            height: 300px;
            background: #1e1e1e;
            border: none;
            color: #d4d4d4;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            padding: 1.5rem;
            resize: vertical;
            outline: none;
        }

        /* IO Section */
        .io-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            padding: 2rem;
            background: #f8fafc;
        }

        .io-box {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .io-header {
            background: #f1f5f9;
            padding: 1rem 1.5rem;
            font-weight: 600;
            color: #475569;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .io-content {
            padding: 1.5rem;
        }

        #stdin-input {
            width: 100%;
            height: 150px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            font-family: monospace;
            resize: vertical;
            font-size: 14px;
        }

        #stdin-input:focus {
            outline: 2px solid #667eea;
            border-color: transparent;
        }

        .output-area {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 1rem;
            min-height: 150px;
            color: #d4d4d4;
            font-family: monospace;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        .error-output {
            color: #ff6b6b;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 1rem;
            padding: 2rem;
            justify-content: center;
            background: white;
        }

        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 40px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Preview */
        .preview-section {
            padding: 2rem;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .preview-header h3 {
            color: #475569;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        #preview {
            width: 100%;
            height: 300px;
            border: none;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        /* Stats */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* FAQ Section */
        .faq-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .faq-section h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: #333;
        }

        .faq-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
        }

        .faq-item {
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
        }

        .faq-item h4 {
            color: #333;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .faq-item p {
            color: #64748b;
            font-size: 0.95rem;
        }

        /* Footer */
        .footer {
            background: #1e293b;
            color: white;
            padding: 3rem 2rem;
            margin-top: 3rem;
            border-radius: 30px 30px 0 0;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: #94a3b8;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section ul li a {
            color: #cbd5e1;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: #667eea;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #334155;
            color: #94a3b8;
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .io-section {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .nav {
                flex-direction: column;
                gap: 1rem;
            }
            
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .faq-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav">
            <div class="logo">
                <div class="logo-icon">‚ö°</div>
                <div class="logo-text">
                    <h1>CodeSphere</h1>
                    <p>Real code execution with Piston API</p>
                </div>
            </div>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#compiler">Compiler</a>
                <a href="#faq">FAQ</a>
                <a href="#contact">Contact</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>The Ultimate Online Compiler</h1>
        <p>Write, compile, and run code in 10+ programming languages using the powerful Piston API. Real execution, real results.</p>
        <div class="hero-badges">
            <span class="badge">üêç Python 3.10</span>
            <span class="badge">‚òï Java 15.0.2</span>
            <span class="badge">‚ö° C++ 14</span>
            <span class="badge">üåê HTML5</span>
            <span class="badge">üé® CSS3</span>
            <span class="badge">‚ö° JavaScript</span>
        </div>
    </section>

    <!-- Main Container -->
    <div class="container">
        <!-- Features Grid -->
        <div class="features-grid" id="features">
            <div class="feature-card">
                <div class="feature-icon">üöÄ</div>
                <h3>Real Compilation</h3>
                <p>Actual code execution using Piston API. Your code runs on remote servers and returns real output.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h3>Secure Execution</h3>
                <p>Piston runs code in isolated containers, ensuring complete security and privacy for your programs.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üì±</div>
                <h3>Live Preview</h3>
                <p>See your HTML, CSS, and JavaScript changes in real-time with our live preview feature.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üíæ</div>
                <h3>Auto Save</h3>
                <p>Never lose your work. Your code is automatically saved in your browser's local storage.</p>
            </div>
        </div>

        <!-- Compiler Section -->
        <div class="compiler-section" id="compiler">
            <div class="compiler-header">
                <h2>‚ö° Online Compiler with Piston API</h2>
                <p>Choose your language, write code, and see real execution results</p>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchMode('web')">üåê Web Development</button>
                <button class="tab-btn" onclick="switchMode('lang')">‚öôÔ∏è Programming Languages</button>
            </div>

            <!-- Language Info -->
            <div class="language-info" id="language-info">
                <div class="info-box">
                    <p>üí° <strong>Web Development Mode:</strong> Write HTML, CSS, and JavaScript with live preview. Perfect for building and testing web pages.</p>
                </div>
            </div>

            <!-- Language Selector -->
            <div class="language-selector" id="lang-selector"></div>

            <!-- Editor -->
            <div class="editor-wrapper">
                <div class="editor-container">
                    <div class="editor-header">
                        <div class="editor-title">
                            <span id="editor-icon">üåê</span>
                            <h3 id="editor-title">HTML Editor</h3>
                        </div>
                        <span class="version-badge" id="version-badge">HTML5</span>
                    </div>
                    <textarea id="code-editor" placeholder="Write your code here..." spellcheck="false"></textarea>
                </div>
            </div>

            <!-- Input/Output Section -->
            <div class="io-section">
                <div class="io-box">
                    <div class="io-header">
                        <span>üì•</span> Standard Input (stdin)
                    </div>
                    <div class="io-content">
                        <textarea id="stdin-input" placeholder="Enter input for your program here..."></textarea>
                    </div>
                </div>
                <div class="io-box">
                    <div class="io-header">
                        <span>üì§</span> Program Output
                    </div>
                    <div class="io-content">
                        <div class="output-area" id="output">// Ready to compile. Click Run to execute your code.</div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn btn-primary" id="run-btn" onclick="runCode()">
                    <span>‚ñ∂</span> Run Code
                </button>
                <button class="btn btn-secondary" onclick="clearCode()">
                    <span>üóëÔ∏è</span> Clear
                </button>
                <button class="btn btn-secondary" onclick="loadSample()">
                    <span>üìã</span> Load Sample
                </button>
            </div>

            <!-- Live Preview (Web Mode) -->
            <div class="preview-section" id="preview-section">
                <div class="preview-header">
                    <h3><span>üåê</span> Live Preview</h3>
                    <span class="version-badge" id="preview-status">Ready</span>
                </div>
                <iframe id="preview" title="Live Preview"></iframe>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number">12+</div>
                <div class="stat-label">Programming Languages</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1M+</div>
                <div class="stat-label">API Calls Daily</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">50K+</div>
                <div class="stat-label">Active Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">99.9%</div>
                <div class="stat-label">Uptime</div>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section" id="faq">
            <h2>Frequently Asked Questions</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h4><span>‚ùì</span> Is it really free?</h4>
                    <p>Yes! CodeSphere uses the free Piston API. No hidden charges or premium features.</p>
                </div>
                <div class="faq-item">
                    <h4><span>‚ùì</span> What languages are supported?</h4>
                    <p>We support Python, Java, C++, C, PHP, Ruby, Go, Rust, TypeScript, plus HTML, CSS, and JavaScript.</p>
                </div>
                <div class="faq-item">
                    <h4><span>‚ùì</span> Do I need to install anything?</h4>
                    <p>No installation needed! Everything runs in your browser with Piston API handling execution.</p>
                </div>
                <div class="faq-item">
                    <h4><span>‚ùì</span> Is my code saved?</h4>
                    <p>Your code is automatically saved in your browser's local storage. You can also manually save it.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h4>CodeSphere</h4>
                <p>The ultimate online compiler powered by Piston API. Write, compile, and run code in your browser.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#compiler">Compiler</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#">Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Connect With Us</h4>
                <ul>
                    <li><a href="#">GitHub</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Discord</a></li>
                    <li><a href="#">Email</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2024 CodeSphere. Powered by Piston API. Made with ‚ù§Ô∏è for developers worldwide</p>
        </div>
    </footer>

    <script>
        // Language configurations with Piston API versions
        const languages = {
            // Web Dev Languages
            html: {
                name: 'HTML',
                icon: 'üåê',
                version: '5',
                mode: 'web',
                pistonLang: 'html',
                pistonVersion: '5.0',
                description: 'HTML (HyperText Markup Language) is the standard markup language for creating web pages.',
                sample: `<!DOCTYPE html>
<html>
<head>
    <title>My Awesome Page</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }
        .card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 400px;
        }
        h1 {
            color: #667eea;
            margin-bottom: 20px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üöÄ Welcome to CodeSphere!</h1>
        <p>This is a live HTML preview with embedded CSS.</p>
        <button onclick="alert('Hello from CodeSphere!')">Click Me</button>
    </div>
</body>
</html>`
            },
            css: {
                name: 'CSS',
                icon: 'üé®',
                version: '3',
                mode: 'web',
                pistonLang: 'css',
                pistonVersion: '3.0',
                description: 'CSS (Cascading Style Sheets) is used to style and layout web pages.',
                sample: `/* CSS Styling Example */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Arial', sans-serif;
}

.container {
    perspective: 1000px;
}

.card {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    text-align: center;
    transform-style: preserve-3d;
    transition: transform 0.5s;
    animation: float 3s ease-in-out infinite;
}

.card:hover {
    transform: rotateY(10deg) rotateX(5deg);
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

h1 {
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 2.5em;
    margin-bottom: 20px;
}

.button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 20px;
}

.button:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
}`
            },
            js: {
                name: 'JavaScript',
                icon: '‚ö°',
                version: 'ES2022',
                mode: 'web',
                pistonLang: 'javascript',
                pistonVersion: '18.15.0',
                description: 'JavaScript is a programming language that enables interactive web pages.',
                sample: `// Interactive JavaScript Demo
class CodeSphere {
    constructor(name) {
        this.name = name;
        this.users = [];
    }
    
    greet() {
        return \`‚ú® Welcome to \${this.name}!\`;
    }
    
    addUser(user) {
        this.users.push(user);
        return \`üë§ User \${user} added. Total users: \${this.users.length}\`;
    }
    
    getStats() {
        return {
            name: this.name,
            userCount: this.users.length,
            users: this.users
        };
    }
}

// Create instance
const app = new CodeSphere('CodeSphere');

// DOM manipulation
document.addEventListener('DOMContentLoaded', () => {
    const app = document.getElementById('app');
    if (!app) {
        // Create container if it doesn't exist
        const container = document.createElement('div');
        container.id = 'app';
        container.innerHTML = \`
            <div style="text-align: center; padding: 40px;">
                <h1 style="color: #667eea;">\${new CodeSphere('CodeSphere').greet()}</h1>
                <button onclick="demo()" style="
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    color: white;
                    border: none;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                ">Try Me!</button>
                <div id="output" style="margin-top: 20px;"></div>
            </div>
        \`;
        document.body.appendChild(container);
    }
});

function demo() {
    const output = document.getElementById('output');
    const sphere = new CodeSphere('CodeSphere');
    
    let html = '<div style="background: #f0f0f0; padding: 20px; border-radius: 10px;">';
    html += '<h3>üìä JavaScript Demo Output:</h3>';
    html += '<p>' + sphere.greet() + '</p>';
    html += '<p>' + sphere.addUser('Alice') + '</p>';
    html += '<p>' + sphere.addUser('Bob') + '</p>';
    html += '<p>üìà Stats: ' + JSON.stringify(sphere.getStats(), null, 2) + '</p>';
    html += '</div>';
    
    output.innerHTML = html;
}`
            },
            // Programming Languages for Piston API
            python: {
                name: 'Python',
                icon: 'üêç',
                version: '3.10',
                mode: 'lang',
                pistonLang: 'python',
                pistonVersion: '3.10.0',
                description: 'Python is a high-level, interpreted programming language known for its simplicity.',
                sample: `# Python Program with Classes and Functions
class Calculator:
    def __init__(self, name):
        self.name = name
        self.history = []
    
    def add(self, a, b):
        result = a + b
        self.history.append(f"{a} + {b} = {result}")
        return result
    
    def multiply(self, a, b):
        result = a * b
        self.history.append(f"{a} √ó {b} = {result}")
        return result
    
    def show_history(self):
        print(f"\\nüìä Calculation History for {self.name}:")
        for entry in self.history:
            print(f"  ‚Ä¢ {entry}")

def fibonacci(n):
    """Generate Fibonacci sequence"""
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

def main():
    # Get user input
    name = input("Enter your name: ")
    print(f"\\nHello, {name}! Welcome to Python Calculator\\n")
    
    # Create calculator instance
    calc = Calculator(name)
    
    # Perform calculations
    print("Performing calculations...")
    print(f"10 + 5 = {calc.add(10, 5)}")
    print(f"6 √ó 7 = {calc.multiply(6, 7)}")
    
    # Show history
    calc.show_history()
    
    # Fibonacci sequence
    n = 10
    print(f"\\nüìà Fibonacci sequence up to {n}:")
    for i in range(n):
        print(fibonacci(i), end=" ")
    print()

if __name__ == "__main__":
    main()`
            },
            java: {
                name: 'Java',
                icon: '‚òï',
                version: '15.0.2',
                mode: 'lang',
                pistonLang: 'java',
                pistonVersion: '15.0.2',
                description: 'Java is a class-based, object-oriented programming language designed for portability.',
                sample: `// Java Program with OOP Concepts
import java.util.*;

class Student {
    private String name;
    private int age;
    private List<Integer> grades;
    
    public Student(String name, int age) {
        this.name = name;
        this.age = age;
        this.grades = new ArrayList<>();
    }
    
    public void addGrade(int grade) {
        grades.add(grade);
        System.out.println("  ‚úì Added grade: " + grade);
    }
    
    public double getAverageGrade() {
        if (grades.isEmpty()) return 0;
        return grades.stream().mapToInt(Integer::intValue).average().orElse(0);
    }
    
    public void displayInfo() {
        System.out.println("\\nüìã Student Information:");
        System.out.println("  Name: " + name);
        System.out.println("  Age: " + age);
        System.out.println("  Grades: " + grades);
        System.out.printf("  Average: %.2f\\n", getAverageGrade());
    }
}

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        
        System.out.println("=== Student Management System ===\\n");
        
        System.out.print("Enter student name: ");
        String name = scanner.nextLine();
        
        System.out.print("Enter student age: ");
        int age = scanner.nextInt();
        
        // Create student
        Student student = new Student(name, age);
        
        // Add grades
        System.out.println("\\nEnter 5 grades:");
        for (int i = 1; i <= 5; i++) {
            System.out.print("  Grade " + i + ": ");
            int grade = scanner.nextInt();
            student.addGrade(grade);
        }
        
        // Display information
        student.displayInfo();
        
        scanner.close();
    }
}`
            },
            cpp: {
                name: 'C++',
                icon: '‚ö°',
                version: '14',
                mode: 'lang',
                pistonLang: 'cpp',
                pistonVersion: '14',
                description: 'C++ is a powerful general-purpose programming language with object-oriented features.',
                sample: `// C++ Program with STL
#include <iostream>
#include <vector>
#include <algorithm>
#include <string>
using namespace std;

template<typename T>
class DataProcessor {
private:
    vector<T> data;
    
public:
    void addItem(T item) {
        data.push_back(item);
        cout << "  ‚úì Added: " << item << endl;
    }
    
    void displaySorted() {
        vector<T> sorted = data;
        sort(sorted.begin(), sorted.end());
        
        cout << "\\nüìä Sorted Data:" << endl;
        for (const auto& item : sorted) {
            cout << "  ‚Ä¢ " << item << endl;
        }
    }
    
    T getMax() {
        if (data.empty()) return T();
        return *max_element(data.begin(), data.end());
    }
    
    size_t size() const {
        return data.size();
    }
};

int main() {
    cout << "=== C++ Data Processor ===\\n" << endl;
    
    string name;
    cout << "Enter your name: ";
    getline(cin, name);
    cout << "Hello, " << name << "!\\n" << endl;
    
    // Create integer processor
    DataProcessor<int> intProcessor;
    cout << "Adding integers:" << endl;
    intProcessor.addItem(42);
    intProcessor.addItem(17);
    intProcessor.addItem(89);
    intProcessor.addItem(5);
    
    cout << "\\nüìà Maximum value: " << intProcessor.getMax() << endl;
    intProcessor.displaySorted();
    
    // Create string processor
    DataProcessor<string> strProcessor;
    cout << "\\nAdding strings:" << endl;
    strProcessor.addItem("apple");
    strProcessor.addItem("zebra");
    strProcessor.addItem("banana");
    strProcessor.addItem("cherry");
    
    strProcessor.displaySorted();
    
    cout << "\\n‚úÖ Total items processed: " 
         << (intProcessor.size() + strProcessor.size()) << endl;
    
    return 0;
}`
            },
            c: {
                name: 'C',
                icon: 'üîß',
                version: '17',
                mode: 'lang',
                pistonLang: 'c',
                pistonVersion: '17',
                description: 'C is a general-purpose, procedural programming language.',
                sample: `// C Program with Dynamic Memory
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
    char name[50];
    int age;
    float score;
} Student;

void printStudent(const Student* s) {
    printf("  Name: %s\n", s->name);
    printf("  Age: %d\n", s->age);
    printf("  Score: %.2f\n", s->score);
}

float calculateAverage(Student* students, int count) {
    float sum = 0;
    for (int i = 0; i < count; i++) {
        sum += students[i].score;
    }
    return count > 0 ? sum / count : 0;
}

int main() {
    printf("=== Student Record System ===\n\n");
    
    char name[50];
    printf("Enter your name: ");
    fgets(name, sizeof(name), stdin);
    name[strcspn(name, "\n")] = 0;
    printf("Hello, %s!\n\n", name);
    
    // Allocate memory for students
    int numStudents;
    printf("Enter number of students: ");
    scanf("%d", &numStudents);
    getchar(); // consume newline
    
    Student* students = (Student*)malloc(numStudents * sizeof(Student));
    if (students == NULL) {
        printf("Memory allocation failed!\n");
        return 1;
    }
    
    // Input student data
    for (int i = 0; i < numStudents; i++) {
        printf("\nüìù Student %d:\n", i + 1);
        
        printf("  Name: ");
        fgets(students[i].name, sizeof(students[i].name), stdin);
        students[i].name[strcspn(students[i].name, "\n")] = 0;
        
        printf("  Age: ");
        scanf("%d", &students[i].age);
        
        printf("  Score: ");
        scanf("%f", &students[i].score);
        getchar(); // consume newline
    }
    
    // Display results
    printf("\nüìä Student Records:\n");
    for (int i = 0; i < numStudents; i++) {
        printf("\nStudent %d:\n", i + 1);
        printStudent(&students[i]);
    }
    
    printf("\nüìà Average Score: %.2f\n", calculateAverage(students, numStudents));
    
    // Free memory
    free(students);
    
    return 0;
}`
            },
            php: {
                name: 'PHP',
                icon: 'üêò',
                version: '8.2',
                mode: 'lang',
                pistonLang: 'php',
                pistonVersion: '8.2.3',
                description: 'PHP is a server-side scripting language designed for web development.',
                sample: `<?php
// PHP Program with OOP
class TaskManager {
    private $tasks = [];
    private $userName;
    
    public function __construct($userName) {
        $this->userName = $userName;
        echo "‚úì Task Manager initialized for $userName\n";
    }
    
    public function addTask($task, $priority = 'medium') {
        $this->tasks[] = [
            'task' => $task,
            'priority' => $priority,
            'completed' => false,
            'created' => date('Y-m-d H:i:s')
        ];
        echo "  ‚úì Added task: $task (Priority: $priority)\n";
    }
    
    public function completeTask($index) {
        if (isset($this->tasks[$index])) {
            $this->tasks[$index]['completed'] = true;
            echo "  ‚úì Completed: " . $this->tasks[$index]['task'] . "\n";
        }
    }
    
    public function displayTasks() {
        echo "\nüìã Tasks for " . $this->userName . ":\n";
        if (empty($this->tasks)) {
            echo "  No tasks found.\n";
            return;
        }
        
        foreach ($this->tasks as $index => $task) {
            $status = $task['completed'] ? '‚úÖ' : '‚≠ï';
            echo "  $status [$index] " . $task['task'];
            echo " (Priority: " . $task['priority'] . ")\n";
        }
    }
    
    public function getStats() {
        $total = count($this->tasks);
        $completed = count(array_filter($this->tasks, fn($t) => $t['completed']));
        $pending = $total - $completed;
        
        return [
            'total' => $total,
            'completed' => $completed,
            'pending' => $pending,
            'completion_rate' => $total > 0 ? round(($completed/$total)*100, 2) : 0
        ];
    }
}

// Main program
echo "=== Task Manager ===\n\n";

$name = readline("Enter your name: ");
echo "Hello, $name!\n\n";

// Create task manager
$manager = new TaskManager($name);

// Add some tasks
$manager->addTask("Complete project report", "high");
$manager->addTask("Review pull requests", "high");
$manager->addTask("Update documentation", "medium");
$manager->addTask("Team meeting", "low");

// Display tasks
$manager->displayTasks();

// Complete a task
echo "\nCompleting task 0...\n";
$manager->completeTask(0);

// Show updated tasks
$manager->displayTasks();

// Show statistics
$stats = $manager->getStats();
echo "\nüìä Statistics:\n";
echo "  Total tasks: " . $stats['total'] . "\n";
echo "  Completed: " . $stats['completed'] . "\n";
echo "  Pending: " . $stats['pending'] . "\n";
echo "  Completion rate: " . $stats['completion_rate'] . "%\n";
?>`
            },
            ruby: {
                name: 'Ruby',
                icon: 'üíé',
                version: '3.2',
                mode: 'lang',
                pistonLang: 'ruby',
                pistonVersion: '3.2.0',
                description: 'Ruby is a dynamic, object-oriented programming language known for its simplicity.',
                sample: `# Ruby Program with Blocks and Modules
module Formattable
  def format_as_table(data)
    puts "+" + "-" * 50 + "+"
    data.each { |row| puts "| #{row}" }
    puts "+" + "-" * 50 + "+"
  end
end

class Analytics
  include Formattable
  
  attr_reader :name, :data
  
  def initialize(name)
    @name = name
    @data = []
    puts "‚úì Analytics initialized for #{name}"
  end
  
  def add_record(value)
    @data << value
    puts "  ‚úì Added: #{value}"
  end
  
  def analyze
    return "No data" if @data.empty?
    
    {
      count: @data.length,
      sum: @data.sum,
      average: @data.sum.to_f / @data.length,
      min: @data.min,
      max: @data.max,
      sorted: @data.sort
    }
  end
  
  def process_with_block
    puts "\nüîÑ Processing each item:"
    @data.each_with_index do |item, index|
      yield(item, index) if block_given?
    end
  end
end

# Main program
puts "=== Ruby Analytics Dashboard ===\n\n"

print "Enter your name: "
name = gets.chomp
puts "Hello, #{name}!\n\n"

# Create analytics instance
analytics = Analytics.new(name)

# Add some data
[42, 17, 89, 5, 63, 28].each { |n| analytics.add_record(n) }

# Analyze data
results = analytics.analyze
puts "\nüìä Analysis Results:"
results.each do |key, value|
  puts "  #{key}: #{value}"
end

# Use block for processing
analytics.process_with_block do |item, index|
  puts "  Item #{index}: #{item} (squared: #{item * item})"
end

# Use the module method
puts "\nüìã Formatted Output:"
analytics.format_as_table(results.map { |k,v| "#{k}: #{v}" })

puts "\n‚úÖ Analysis complete!"`
            },
            go: {
                name: 'Go',
                icon: 'üîµ',
                version: '1.21',
                mode: 'lang',
                pistonLang: 'go',
                pistonVersion: '1.21.0',
                description: 'Go is a statically typed, compiled programming language designed at Google.',
                sample: `// Go Program with Concurrency
package main

import (
    "fmt"
    "sync"
    "time"
)

// Task represents a unit of work
type Task struct {
    ID       int
    Name     string
    Duration time.Duration
}

// Worker processes tasks
func worker(id int, tasks <-chan Task, results chan<- string, wg *sync.WaitGroup) {
    defer wg.Done()
    
    for task := range tasks {
        fmt.Printf("Worker %d starting task: %s\n", id, task.Name)
        time.Sleep(task.Duration * time.Millisecond)
        result := fmt.Sprintf("Worker %d completed: %s (took %dms)", 
            id, task.Name, task.Duration)
        results <- result
    }
}

func main() {
    fmt.Println("=== Go Concurrent Task Processor ===\n")
    
    var name string
    fmt.Print("Enter your name: ")
    fmt.Scanln(&name)
    fmt.Printf("Hello, %s!\n\n", name)
    
    // Create tasks
    tasks := []Task{
        {ID: 1, Name: "Process data", Duration: 100},
        {ID: 2, Name: "Generate report", Duration: 150},
        {ID: 3, Name: "Send email", Duration: 50},
        {ID: 4, Name: "Backup database", Duration: 200},
        {ID: 5, Name: "Clean cache", Duration: 75},
    }
    
    // Create channels
    taskChannel := make(chan Task, len(tasks))
    resultChannel := make(chan string, len(tasks))
    
    // Start workers
    var wg sync.WaitGroup
    numWorkers := 3
    
    fmt.Printf("Starting %d workers...\n\n", numWorkers)
    
    for w := 1; w <= numWorkers; w++ {
        wg.Add(1)
        go worker(w, taskChannel, resultChannel, &wg)
    }
    
    // Send tasks
    for _, task := range tasks {
        taskChannel <- task
    }
    close(taskChannel)
    
    // Wait for workers and close results
    go func() {
        wg.Wait()
        close(resultChannel)
    }()
    
    // Collect results
    fmt.Println("üìä Processing Results:")
    for result := range resultChannel {
        fmt.Println("  " + result)
    }
    
    fmt.Printf("\n‚úÖ All %d tasks processed successfully!\n", len(tasks))
}`
            },
            rust: {
                name: 'Rust',
                icon: 'ü¶Ä',
                version: '1.72',
                mode: 'lang',
                pistonLang: 'rust',
                pistonVersion: '1.72.0',
                description: 'Rust is a systems programming language focused on safety and performance.',
                sample: `// Rust Program with Ownership and Traits
use std::fmt;

#[derive(Debug)]
struct Project {
    name: String,
    lines_of_code: u32,
    language: String,
}

trait Summary {
    fn summarize(&self) -> String;
}

impl Summary for Project {
    fn summarize(&self) -> String {
        format!("{} ({}): {} lines of {}",
            self.name, self.language, self.lines_of_code, self.language)
    }
}

impl fmt::Display for Project {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        write!(f, "üìÅ {} [{}] - {} lines", self.name, self.language, self.lines_of_code)
    }
}

struct Repository {
    name: String,
    projects: Vec<Project>,
}

impl Repository {
    fn new(name: &str) -> Self {
        Repository {
            name: String::from(name),
            projects: Vec::new(),
        }
    }
    
    fn add_project(&mut self, project: Project) {
        println!("  ‚úì Added: {}", project.summarize());
        self.projects.push(project);
    }
    
    fn total_lines(&self) -> u32 {
        self.projects.iter().map(|p| p.lines_of_code).sum()
    }
    
    fn find_by_language(&self, language: &str) -> Vec<&Project> {
        self.projects
            .iter()
            .filter(|p| p.language == language)
            .collect()
    }
}

fn main() {
    println!("=== Rust Repository Manager ===\n");
    
    // Get user input
    let mut input = String::new();
    println!("Enter your name:");
    std::io::stdin().read_line(&mut input).expect("Failed to read line");
    let name = input.trim();
    println!("Hello, {}!\n", name);
    
    // Create repository
    let mut repo = Repository::new("CodeSphere Projects");
    
    // Add projects
    let projects = vec![
        Project {
            name: String::from("Web App"),
            lines_of_code: 1500,
            language: String::from("Rust"),
        },
        Project {
            name: String::from("API Service"),
            lines_of_code: 850,
            language: String::from("Rust"),
        },
        Project {
            name: String::from("CLI Tool"),
            lines_of_code: 420,
            language: String::from("Python"),
        },
        Project {
            name: String::from("Database Driver"),
            lines_of_code: 2100,
            language: String::from("Rust"),
        },
    ];
    
    println!("Adding projects to repository:");
    for project in projects {
        repo.add_project(project);
    }
    
    // Display statistics
    println!("\nüìä Repository Statistics:");
    println!("  Repository: {}", repo.name);
    println!("  Total projects: {}", repo.projects.len());
    println!("  Total lines of code: {}", repo.total_lines());
    
    // Find Rust projects
    let rust_projects = repo.find_by_language("Rust");
    println!("\nü¶Ä Rust Projects ({}):", rust_projects.len());
    for project in rust_projects {
        println!("  ‚Ä¢ {}", project);
    }
    
    println!("\n‚úÖ Analysis complete!");
}`
            },
            typescript: {
                name: 'TypeScript',
                icon: 'üìò',
                version: '5.2',
                mode: 'lang',
                pistonLang: 'typescript',
                pistonVersion: '5.2.2',
                description: 'TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.',
                sample: `// TypeScript Program with Types and Interfaces
interface User {
    id: number;
    name: string;
    email: string;
    role: 'admin' | 'developer' | 'viewer';
}

interface Project {
    id: number;
    name: string;
    techStack: string[];
    ownerId: number;
    stars: number;
}

class CodeSpherePlatform {
    private users: Map<number, User> = new Map();
    private projects: Project[] = [];
    private currentUser?: User;
    
    constructor(public name: string) {
        console.log(\`üöÄ Platform '\${name}' initialized\`);
    }
    
    registerUser(user: User): void {
        this.users.set(user.id, user);
        console.log(\`  ‚úì User registered: \${user.name} (\${user.role})\`);
    }
    
    login(userId: number): boolean {
        const user = this.users.get(userId);
        if (user) {
            this.currentUser = user;
            console.log(\`  ‚úì Logged in as: \${user.name}\`);
            return true;
        }
        return false;
    }
    
    createProject(project: Omit<Project, 'id'>): Project {
        const newProject: Project = {
            ...project,
            id: this.projects.length + 1
        };
        this.projects.push(newProject);
        console.log(\`  ‚úì Project created: \${newProject.name}\`);
        return newProject;
    }
    
    getTopProjects(limit: number = 3): Project[] {
        return [...this.projects]
            .sort((a, b) => b.stars - a.stars)
            .slice(0, limit);
    }
    
    getUserProjects(userId: number): Project[] {
        return this.projects.filter(p => p.ownerId === userId);
    }
    
    getStats(): Record<string, any> {
        return {
            totalUsers: this.users.size,
            totalProjects: this.projects.length,
            averageStars: this.projects.reduce((acc, p) => acc + p.stars, 0) / this.projects.length,
            topTech: this.getTopTechnologies(),
            currentUser: this.currentUser?.name
        };
    }
    
    private getTopTechnologies(): string[] {
        const techCount = new Map<string, number>();
        this.projects.forEach(p => {
            p.techStack.forEach(tech => {
                techCount.set(tech, (techCount.get(tech) || 0) + 1);
            });
        });
        
        return Array.from(techCount.entries())
            .sort((a, b) => b[1] - a[1])
            .slice(0, 3)
            .map(([tech]) => tech);
    }
}

// Main execution
async function main() {
    console.log("=== TypeScript Platform Demo ===\\n");
    
    // Create platform
    const platform = new CodeSpherePlatform("CodeSphere");
    
    // Register users
    const users: User[] = [
        { id: 1, name: "Alice", email: "alice@example.com", role: "admin" },
        { id: 2, name: "Bob", email: "bob@example.com", role: "developer" },
        { id: 3, name: "Charlie", email: "charlie@example.com", role: "viewer" }
    ];
    
    users.forEach(u => platform.registerUser(u));
    
    // Login
    console.log("\\nüîê Login attempt:");
    platform.login(1);
    
    // Create projects
    console.log("\\nüì¶ Creating projects:");
    platform.createProject({
        name: "TypeScript Compiler",
        techStack: ["TypeScript", "Node.js"],
        ownerId: 1,
        stars: 1500
    });
    
    platform.createProject({
        name: "React Dashboard",
        techStack: ["TypeScript", "React", "Redux"],
        ownerId: 2,
        stars: 890
    });
    
    platform.createProject({
        name: "API Gateway",
        techStack: ["TypeScript", "Node.js", "GraphQL"],
        ownerId: 1,
        stars: 2300
    });
    
    // Get statistics
    console.log("\\nüìä Platform Statistics:");
    const stats = platform.getStats();
    Object.entries(stats).forEach(([key, value]) => {
        console.log(\`  \${key}: \${JSON.stringify(value)}\`);
    });
    
    // Top projects
    console.log("\\nüèÜ Top Projects:");
    platform.getTopProjects().forEach((p, i) => {
        console.log(\`  \${i + 1}. \${p.name} (\${p.stars} stars)\`);
    });
}

// Run the program
main().catch(console.error);`
            }
        };

        let currentMode = 'web';
        let currentLang = 'html';
        let isRunning = false;

        // Initialize
        window.onload = function() {
            updateLanguageSelector();
            loadLanguage('html');
            updateLanguageInfo();
            
            // Load saved code from localStorage
            const savedCode = localStorage.getItem('codesphere_code');
            const savedLang = localStorage.getItem('codesphere_lang');
            if (savedCode && savedLang && languages[savedLang]) {
                document.getElementById('code-editor').value = savedCode;
                loadLanguage(savedLang);
            }
        };

        function switchMode(mode) {
            currentMode = mode;
            
            // Update tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update language info
            updateLanguageInfo();
            
            // Update language selector
            updateLanguageSelector();
            
            // Load first language of the mode
            const firstLang = Object.keys(languages).find(key => languages[key].mode === mode);
            if (firstLang) {
                loadLanguage(firstLang);
            }
            
            // Show/hide preview
            document.getElementById('preview-section').style.display = mode === 'web' ? 'block' : 'none';
        }

        function updateLanguageInfo() {
            const infoBox = document.querySelector('.info-box p');
            if (currentMode === 'web') {
                infoBox.innerHTML = 'üí° <strong>Web Development Mode:</strong> Write HTML, CSS, and JavaScript with live preview. Perfect for building and testing web pages.';
            } else {
                infoBox.innerHTML = 'üí° <strong>Programming Languages Mode:</strong> Compile and run code using the Piston API. Real execution, real results.';
            }
        }

        function updateLanguageSelector() {
            const selector = document.getElementById('lang-selector');
            selector.innerHTML = '';
            
            Object.entries(languages).forEach(([key, lang]) => {
                if (lang.mode === currentMode) {
                    const btn = document.createElement('button');
                    btn.className = `lang-btn ${key === currentLang ? 'active' : ''}`;
                    btn.innerHTML = `${lang.icon} ${lang.name} <span style="font-size:0.8rem; opacity:0.7;">${lang.version}</span>`;
                    btn.onclick = () => loadLanguage(key);
                    selector.appendChild(btn);
                }
            });
        }

        function loadLanguage(lang) {
            currentLang = lang;
            
            // Update active state
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Find and activate the correct button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if (btn.innerHTML.includes(languages[lang].name)) {
                    btn.classList.add('active');
                }
            });
            
            // Update editor
            document.getElementById('code-editor').value = languages[lang].sample;
            document.getElementById('editor-icon').textContent = languages[lang].icon;
            document.getElementById('editor-title').innerHTML = `${languages[lang].name} Editor`;
            document.getElementById('version-badge').textContent = languages[lang].version;
            
            // Update language info
            const infoBox = document.querySelector('.info-box p');
            infoBox.innerHTML = `üí° <strong>${languages[lang].name} ${languages[lang].version}:</strong> ${languages[lang].description}`;
            
            // Clear output
            document.getElementById('output').innerHTML = '// Ready to compile. Click Run to execute your code.';
            
            // Update preview if web mode
            if (languages[lang].mode === 'web') {
                runCode();
            }
            
            // Auto-save to localStorage
            saveToLocalStorage();
        }

        // Auto-save functionality
        setInterval(() => {
            saveToLocalStorage();
        }, 2000);

        function saveToLocalStorage() {
            const code = document.getElementById('code-editor').value;
            localStorage.setItem('codesphere_code', code);
            localStorage.setItem('codesphere_lang', currentLang);
        }

        async function runCode() {
            if (isRunning) return;
            
            const code = document.getElementById('code-editor').value;
            const stdin = document.getElementById('stdin-input').value;
            const output = document.getElementById('output');
            const runBtn = document.getElementById('run-btn');
            const previewStatus = document.getElementById('preview-status');
            
            if (currentMode === 'web') {
                // Web mode - live preview (no API needed)
                const preview = document.getElementById('preview');
                const doc = preview.contentDocument || preview.contentWindow.document;
                
                if (currentLang === 'html') {
                    doc.open();
                    doc.write(code);
                    doc.close();
                    output.innerHTML = '‚úì HTML rendered successfully';
                    previewStatus.textContent = '‚úì Live';
                } else if (currentLang === 'css') {
                    doc.open();
                    doc.write(`
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <style>${code}</style>
                        </head>
                        <body>
                            <div class="container">
                                <div class="card">
                                    <h1>CSS Preview</h1>
                                    <p>This is a sample HTML to demonstrate your CSS styles.</p>
                                    <button class="button">Sample Button</button>
                                </div>
                            </div>
                        </body>
                        </html>
                    `);
                    doc.close();
                    output.innerHTML = '‚úì CSS applied successfully';
                    previewStatus.textContent = '‚úì Live';
                } else if (currentLang === 'js') {
                    doc.open();
                    doc.write(`
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <title>JavaScript Demo</title>
                            <style>
                                body { font-family: Arial; padding: 20px; }
                                #app { text-align: center; }
                                button { 
                                    background: linear-gradient(135deg, #667eea, #764ba2);
                                    color: white;
                                    border: none;
                                    padding: 12px 30px;
                                    border-radius: 25px;
                                    cursor: pointer;
                                }
                            </style>
                        </head>
                        <body>
                            <div id="app"></div>
                            <script>
                                try {
                                    ${code}
                                } catch(e) {
                                    document.body.innerHTML += '<div style="color:red; padding:20px;">Error: ' + e.message + '</div>';
                                }
                            <\/script>
                        </body>
                        </html>
                    `);
                    doc.close();
                    output.innerHTML = '‚úì JavaScript executed successfully';
                    previewStatus.textContent = '‚úì Live';
                }
                
                // Auto-save
                saveToLocalStorage();
                return;
            }
            
            // Language mode - use Piston API
            isRunning = true;
            runBtn.innerHTML = '<span class="loading"></span> Compiling...';
            runBtn.disabled = true;
            output.innerHTML = '‚è≥ Sending code to Piston API...';
            
            const lang = languages[currentLang];
            
            try {
                // Prepare the code for Piston API
                let fileContent = code;
                
                // Special handling for Java (needs class name Main)
                if (currentLang === 'java' && !code.includes('public class Main')) {
                    // Wrap in Main class if needed
                    fileContent = `public class Main {\n    public static void main(String[] args) {\n${code.split('\n').map(line => '        ' + line).join('\n')}\n    }\n}`;
                }
                
                const response = await fetch('https://emkc.org/api/v2/piston/execute', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        language: lang.pistonLang,
                        version: lang.pistonVersion,
                        files: [
                            {
                                name: currentLang === 'java' ? 'Main.java' : `main.${lang.pistonLang}`,
                                content: fileContent
                            }
                        ],
                        stdin: stdin,
                        args: [],
                        compile_timeout: 10000,
                        run_timeout: 3000
                    })
                });
                
                const data = await response.json();
                
                if (data.run && data.run.output) {
                    // Format output with proper styling
                    let formattedOutput = data.run.output;
                    if (data.run.stderr) {
                        formattedOutput += '\n\n‚ö†Ô∏è Stderr:\n' + data.run.stderr;
                    }
                    if (data.run.code !== 0) {
                        formattedOutput = `<span class="error-output">‚ùå Exit code: ${data.run.code}</span>\n\n${formattedOutput}`;
                    }
                    output.innerHTML = formattedOutput.replace(/\n/g, '<br>');
                } else if (data.run && data.run.stderr) {
                    output.innerHTML = `<span class="error-output">‚ùå Error:</span>\n\n${data.run.stderr.replace(/\n/g, '<br>')}`;
                } else {
                    output.innerHTML = '‚ö†Ô∏è No output received from API';
                }
                
            } catch (error) {
                output.innerHTML = `<span class="error-output">‚ùå API Error:</span>\n\n${error.message}`;
                console.error('Piston API error:', error);
            } finally {
                isRunning = false;
                runBtn.innerHTML = '<span>‚ñ∂</span> Run Code';
                runBtn.disabled = false;
                
                // Auto-save
                saveToLocalStorage();
            }
        }

        function clearCode() {
            if (confirm('Clear editor and output?')) {
                document.getElementById('code-editor').value = '';
                document.getElementById('stdin-input').value = '';
                document.getElementById('output').innerHTML = '// Ready to compile. Click Run to execute your code.';
                
                if (currentMode === 'web') {
                    document.getElementById('preview').srcdoc = '';
                    document.getElementById('preview-status').textContent = 'Ready';
                }
                
                // Clear localStorage for this session
                localStorage.removeItem('codesphere_code');
            }
        }

        function loadSample() {
            loadLanguage(currentLang);
        }

        // Make functions global
        window.switchMode = switchMode;
        window.runCode = runCode;
        window.clearCode = clearCode;
        window.loadSample = loadSample;
    </script>
</body>
</html>
